{% extends 'restaurant/base.html' %}
{% load static %}

{% block content %}
    <hr>
    
    <div class="row" id="menu-display">
        {% for option in options %}
        <div class="col-lg-4">
            <img class="thumbnail" src="{% if option.image %}{{ option.image.url }}alt="{% static 'img/awaiting_image.png' %}{% endif %}">
            <div>
                <h4><strong>{{ option.name }}</strong></h4>
                <hr>
               <button type="button" id="add-to-basket" value="{{option.id}}" class="btn btn-secondary btn-sm">
               Add to basket | £{{ option.price }}
               </button>
                
                {% comment %} <a class="btn btn-outline-secondary" href="{{ option.get_absolute_url }}">£{{ option.price }} | Select</a> {% endcomment %}
                

                <hr>
                
            </div>          
        </div>
        {% endfor %}
    </div>

    <script>
            $(document).on('click', '#add-button', function(e){

                e.preventDefault();

                $.ajax({

                type: 'POST',
                url: '%{ 'basket-add' }%',
                data: { 

                    option_id: $('#add-to-basket').val(),
                    csrfmiddlewaretoken: "{{ csrf_token }}",
                    action: 'post'

                    },

                    sucess: function(json){

                    },

                    error: function(xhr, errmsg, err){
                    };
                    

                });

            });
    </script>
            
{% endblock %}                                                                                                     b                                                                          